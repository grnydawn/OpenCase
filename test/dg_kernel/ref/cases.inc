REFCASE('export OMP_NUM_THREADS=16; make clean; make ref_recover; make build FC=gfortran FC_FLAGS="-O3 -fopenmp -ffree-line-length-none -ffree-form"; make run')
!PRERUN('export OMP_NUM_THREADS=4';'export OMP_NUM_THREADS=8';'export OMP_NUM_THREADS=16')1
!SRCGEN(loop_unroll: target={230}*, factor=(4;8;full)1, method=('inc';'const')1)
!SRCGEN(loop_merge: from=(220), to=(30)*)
!SRCGEN(loop_split: before=(250)*)
!SRCGEN(loop_interchange: outer=220, inner=(230)*)
!SRCGEN(name_change: target=(240;250), switch=('ii:ie')*)
!BUILD(make: makefile=Makefile, target=build, FC=gfortran, FC_FLAGS=('-fopenmp -ffree-line-length-none'; (-O2;-O3)1;('-opt-prefetch=0';'-opt-prefetch=3')1))
CLEAN(make: makefile=Makefile, target=clean)
BUILD(make: makefile=Makefile, target=build, FC=gfortran, FC_FLAGS=('-fopenmp'; (-O2;-O3;-Ofast)1))
!COMPILE(ifort: flags=('-openmp '; 1(-O2, -O3); *{'-align array64byte'; '-opt-assume-safe-padding'; -opt-prefetch=1(0,3); '-mP2OPT_hlo_fusion=F'; '-no-prec-sqrt'; '-no-prec-div'}))
EXECUTE(make: makefile=Makefile, target=run, repeat=5, sleep=0.3)
MEASURE(gflops: prefix='Gflops   =')
MEASURE(flx_diff: prefix='SUM(flx) =')
MEASURE(fly_diff: prefix='MIN(fly) =')
VERIFY(flx_diff: method='diff', refval='0.1113450E+02', maxdiff='1.0E-16')
VERIFY(fly_diff: method='diff', refval='-0.1567250E+01', maxdiff='1.0E-16')
RANK(gflops: sort=descend)
CASEGEN(dtree)
